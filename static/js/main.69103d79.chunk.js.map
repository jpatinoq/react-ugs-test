{"version":3,"sources":["Map.js","components/Legend.js","App.js","index.js"],"names":["mapboxgl","accessToken","process","Popup","agglosName","UGS_fraction","PM25_2019","annual_mean_temp","annual_precipitation","AEZ_NAME","Pop2015","className","style","color","Map","mapContainerRef","useRef","popUpRef","offset","closeButton","closeOnClick","useEffect","map","container","current","center","zoom","scalebar","ScaleControl","maxWidth","unit","addControl","fullscreen","FullscreenControl","document","querySelector","nav","NavigationControl","showCompass","geocoder","MapboxGeocoder","marker","placeholder","bbox","language","flyTo","easing","t","on","e","getCanvas","cursor","features","queryRenderedFeatures","point","layers","length","feature","popupNode","createElement","ReactDOM","render","properties","toFixed","setLngLat","lngLat","setDOMContent","addTo","remove","ref","Legend","border","bordeRadius","width","id","class","marginLeft","marginTop","marginBottom","fontSize","App","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.69103d79.chunk.js","sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport MapboxGeocoder from '@mapbox/mapbox-gl-geocoder';\nimport '@mapbox/mapbox-gl-geocoder/dist/mapbox-gl-geocoder.css';\nimport './Map.css';\nimport ReactDOM from 'react-dom';\n\n// access token to be read from env\nmapboxgl.accessToken = process.env.REACT_APP_MAPBOX_TOKEN;\n\nconst Popup = \n  ({ agglosName, \n    UGS_fraction, \n    PM25_2019, \n    annual_mean_temp, \n    annual_precipitation, \n    AEZ_NAME, \n    Pop2015 }) => (\n      <div className=\"popup\">\n        <strong style={{color:'white'}}>{agglosName}</strong>\n        <p style={{color:'white'}}>\n        Green space cover: {UGS_fraction}%.<br />\n        PM<sub>2.5</sub> (2019): {PM25_2019} &#13197;/&#13221;.<br />\n        Mean temperature: {annual_mean_temp} &#8451;.<br />\n        Annual precipitation: {annual_precipitation} &#13212;.<br />\n        Agroecological zone: {AEZ_NAME}.<br />\n        Population (2015): {Pop2015} M. \n        </p>\n      </div>\n    );\n\nconst Map = () => {\n  const mapContainerRef = useRef();\n  const popUpRef = useRef(new mapboxgl.Popup({ \n    offset: 15,\n    closeButton: false,\n    closeOnClick: false,\n    className: \"popup\"\n     }));\n\n  // Initialize map when component mounts\n  useEffect(() => {\n    const map = new mapboxgl.Map({\n      container: mapContainerRef.current,\n      style: 'mapbox://styles/mkmd/cl9fukm90000e14qs0in5694z',\n      center: [1, 12],\n      zoom: 5\n    });\n    // Scalebar control\n    const scalebar = new mapboxgl.ScaleControl({\n        maxWidth: 100,\n        unit: 'metric'\n    });\n    map.addControl(scalebar);\n    // Fullscreen control\n    const fullscreen = new mapboxgl.FullscreenControl({container: document.querySelector('body')})\n    map.addControl(fullscreen, 'top-left');\n    // navigation zoom control ( + / -)\n    const nav = new mapboxgl.NavigationControl({\n      showCompass: false\n    });\n    map.addControl(nav, 'top-left');\n    \n    // Geocoder control\n    const geocoder = new MapboxGeocoder({\n      accessToken: process.env.REACT_APP_MAPBOX_TOKEN,\n      mapboxgl: mapboxgl,\n      marker: false, // Do not use the default marker style\n      placeholder: 'Search for cities in Africa', // Placeholder text for the search bar\n      bbox: [-30.234375,-36.597889,61.171875,39.095963], // Bounding box for Africa, search results will be limited to that area. (?)\n      language: \"en\",\n      flyTo: {\n        easing: function(t){\n            return t;\n        },\n        zoom: 8, //to zoom to a specified level (not too much!)\n      }\n    });\n    map.addControl(geocoder, 'top-right');\n\n    // POPUP!!! -> on polygons\n    map.on('mouseenter', 'ugs-polygons', (e) => {\n      // change cursor style as UI indicator\n      map.getCanvas().style.cursor = 'pointer';\n      // get layer feature\n      const features = map.queryRenderedFeatures(e.point, {\n        layers: [\"ugs-polygons\"],\n      });\n      if (features.length > 0) {\n        const feature = features[0];\n        // create popup node\n        const popupNode = document.createElement('div');\n        ReactDOM.render(\n          <Popup \n            agglosName={feature?.properties?.agglosName}\n            UGS_fraction={((feature?.properties?.UGS_fraction)*(100)).toFixed(1)}\n            PM25_2019={feature?.properties?.PM25_2019.toFixed(2)}\n            annual_mean_temp={feature?.properties?.annual_mean_temp.toFixed(1)}\n            annual_precipitation={feature?.properties?.annual_precipitation.toFixed(0)}\n            AEZ_NAME={feature?.properties?.AEZ_NAME}\n            Pop2015={((feature?.properties?.Pop2015)/1000000).toFixed(2)}\n          />,\n          popupNode\n        );\n        popUpRef.current\n          .setLngLat(e.lngLat)\n          .setDOMContent(popupNode)\n          .addTo(map)\n      }\n    });\n\n    // reset cursor to default when user is no longer hovering over a clickable feature\n    map.on('mouseleave', 'ugs-polygons', () => {\n      map.getCanvas().style.cursor = '';\n      popUpRef.current.remove();\n\n    });\n    // POPUP on centroids\n    map.on('mouseenter', 'ugs-centroids', (e) => {\n      // change cursor style as UI indicator\n      map.getCanvas().style.cursor = 'pointer';\n      // get layer feature\n      const features = map.queryRenderedFeatures(e.point, {\n        layers: [\"ugs-centroids\"],\n      });\n      if (features.length > 0) {\n        const feature = features[0];\n        // create popup node\n        const popupNode = document.createElement('div');\n        ReactDOM.render(\n          <Popup \n            agglosName={feature?.properties?.agglosName}\n            UGS_fraction={((feature?.properties?.UGS_fraction)*(100)).toFixed(1)}\n            PM25_2019={feature?.properties?.PM25_2019.toFixed(2)}\n            annual_mean_temp={feature?.properties?.annual_mean_temp.toFixed(1)}\n            annual_precipitation={feature?.properties?.annual_precipitation.toFixed(0)}\n            AEZ_NAME={feature?.properties?.AEZ_NAME}\n            Pop2015={((feature?.properties?.Pop2015)/1000000).toFixed(2)}\n          />,\n          popupNode\n        );\n        popUpRef.current\n          .setLngLat(e.lngLat)\n          .setDOMContent(popupNode)\n          .addTo(map)\n      }\n\n    });\n\n    // reset cursor to default when user is no longer hovering over a clickable feature\n    map.on('mouseleave', 'ugs-centroids', () => {\n      map.getCanvas().style.cursor = '';\n      popUpRef.current.remove();\n\n    });\n\n    // Clean up on unmount\n    return () => map.remove();\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return (\n    <div>\n      <div className='map-container' ref={mapContainerRef} />\n    </div>\n  );\n};\n\nexport default Map;\n","import React from 'react';\n\nfunction Legend() {\n  return (\n    <div>\n      <div style={{border: \"1px solid rgb(201, 185, 159)\", bordeRadius: \"4px\"}}>\n        <div style={{width: \"50%\"}}>\n        {/* legend title */}\n        \t<div id='legend' class='legend'>\n            \t<strong>Urban green space</strong>        \n            </div>\n        {/* add legend bar */}\n            <div class='bar' style={{marginLeft: \"10px\"}}></div>\n        {/* add legend labels */}\n            <div style={{marginLeft: \"10px\", marginTop: \"2px\", marginBottom: \"30px\"}}>\n                <div class='grid txt-xs' style={{fontSize: \"100%\"}}>\n                    <div class='col flex-child-grow'>0%</div>\n                    <div class='col flex-child-grow align-center'>50%</div> \n                    <div class='col flex-child-grow align-r'>100%</div>\n                </div>\n            </div>\n        </div>\n      </div> \n    </div>\n  );\n}\n\nexport default Legend;","import React from 'react';\nimport Map from './Map';\nimport Legend from './components/Legend'\n\nfunction App() {\n  return (\n    <div>\n      <Map />\n      <Legend />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}